<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>org\jgh\scalaws\ScalaWSServlet.scala</title>
        <script type="text/javascript" src="../../../jquery-all.js"></script>
        <script type="text/javascript" src="../../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../../style.css" title="Style">
    </head>
    <body>
        <pre>
<span class="keyword">package</span> org.jgh.scalaws
<span class="comment">//'_' is wildcard in scala</span>
<span class="keyword">import</span> scala.xml._
<span class="keyword">import</span> javax.servlet.http._
<span class="keyword">import</span> javax.servlet._
<span class="keyword">import</span> java.sql._
<span class="keyword">import</span> javax.sql._
<span class="keyword">import</span> javax.naming._

<span class="comment">//Mixin inheritance</span>
<span class="keyword">trait</span> <a title="trait DBAdapter extends java.lang.Object with ScalaObject" id="6750">DBAdapter</a> {
  <span class="keyword">def</span> <a title="=&gt; javax.sql.DataSource" id="7621">datasource</a>:<span title="javax.sql.DataSource">DataSource</span>  <span class="comment">//A dependency that is abstract needs to be supplied by classes that use this trait</span>
  <span class="keyword">abstract</span> <span class="keyword">case</span> <span class="keyword">class</span> <a title="class Param extends java.lang.Object with ScalaObject with Product" id="1345">Param</a>(<a title="Int" id="7653">sqlType</a>:<span title="Int">Int</span>, <a title="Any" id="7654">value</a>:<span title="Any">Any</span>)
  <span class="keyword">case</span> <span class="keyword">class</span> <a title="class StringParam extends DBAdapter.this.Param with ScalaObject with Product" id="8360">StringParam</a>(<a title="Any" id="9327">s</a>:<span title="Any">Any</span>) <span class="keyword">extends</span> <a href="#1345" title="DBAdapter.this.Param">Param</a>(Types.<span title="Int(12)">VARCHAR</span>, <a href="#9327" title="Any">s</a>.<span title="()java.lang.String">toString</span>) 
  <span class="keyword">case</span> <span class="keyword">class</span> <a title="class LongParam extends DBAdapter.this.Param with ScalaObject with Product" id="9428">LongParam</a>(<a title="BigInt" id="9434">s</a>:<a title="BigInt" id="474">BigInt</a>) <span class="keyword">extends</span> <a href="#1345" title="DBAdapter.this.Param">Param</a>(Types.<span title="Int(-5)">BIGINT</span>, <a href="#9434" title="BigInt">s</a>)
  <span class="comment">//Functions are objects and can be passed as parameters . c is a function that takes a Conn as a parameter and returns a sequence of Nodes. </span>
  <span class="keyword">def</span> <a title="((DBAdapter.this.Conn) =&gt; Seq[scala.xml.Node])Seq[scala.xml.Node]" id="7631">withConn</a>(<a title="(DBAdapter.this.Conn) =&gt; Seq[scala.xml.Node]" id="9446">c</a>:Conn =&gt; Seq[Node]):<span title="Seq[scala.xml.Node]">Seq</span>[Node] = { <span class="comment">//[] for type parameters (generics).</span>
    <span class="keyword">val</span> <a title="java.sql.Connection" id="9473">connection</a> =  <a href="#7621" title="=&gt; javax.sql.DataSource">datasource</a>.<a title="()java.sql.Connection" id="7636">getConnection</a>    
    <span class="keyword">val</span> <a title="DBAdapter.this.Conn" id="9474">conn</a> = <span title="DBAdapter.this.Conn" class="keyword">new</span> <a href="#7632" title="DBAdapter.this.Conn">Conn</a>(<a href="#9473" title="java.sql.Connection">connection</a>)    
    <span class="keyword">try</span> {
    	<a href="#9446" title="(DBAdapter.this.Conn)Seq[scala.xml.Node]">c</a>(<a href="#9474" title="DBAdapter.this.Conn">conn</a>)
    } <span class="keyword">finally</span> { <a href="#9473" title="java.sql.Connection">connection</a>.<a title="()Unit" id="9499">close</a> }    
  }  
  <span class="keyword">class</span> <a title="class Conn extends java.lang.Object with ScalaObject" id="7632">Conn</a>(<a title="java.sql.Connection" id="9546">c</a>:<a title="java.sql.Connection" id="7305">Connection</a>) {
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,DBAdapter.this.Param*)java.sql.PreparedStatement" id="9543">prepareStatement</a>(<a title="String" id="9549">sql</a>:<span title="String">String</span>, <a title="DBAdapter.this.Param*" id="9550">params</a>:<span title="DBAdapter.this.Param*">Param</span>*) = {
      <span class="keyword">val</span> <a title="java.sql.PreparedStatement" id="9552">statement</a> = <a href="#9546" title="java.sql.Connection">c</a>.<a title="(java.lang.String)java.sql.PreparedStatement" id="9492">prepareStatement</a>(<a href="#9549" title="String">sql</a>)      
      <a href="#9550" title="DBAdapter.this.Param*">params</a>.<a title="=&gt; List[DBAdapter.this.Param]" id="8134">toList</a>.<a title="=&gt; List[(DBAdapter.this.Param, Int)]" id="7716">zipWithIndex</a>.<a title="(((DBAdapter.this.Param, Int)) =&gt; Unit)Unit" id="7694">foreach</a>(<a title="(DBAdapter.this.Param, Int)" id="9639">z</a> =&gt; <a href="#9552" title="java.sql.PreparedStatement">statement</a>.<a title="(Int,Any,Int)Unit" id="9595">setObject</a>(<a href="#9639" title="(DBAdapter.this.Param, Int)">z</a>.<a title="=&gt; Int" id="8242">_2</a> <a title="(Int)Int" id="3075">+</a><span title="Int(1)" class="int">1</span> , <a href="#9639" title="(DBAdapter.this.Param, Int)">z</a>.<span title="=&gt; DBAdapter.this.Param">_1</span>.<a href="#7654" title="=&gt; Any">value</a>, <a href="#9639" title="(DBAdapter.this.Param, Int)">z</a>.<span title="=&gt; DBAdapter.this.Param">_1</span>.<a href="#7653" title="=&gt; Int">sqlType</a>))
      <a href="#9552" title="java.sql.PreparedStatement">statement</a>
    }
	<span class="keyword">def</span> <a title="(String,DBAdapter.this.Param*)Int" id="9544">insert</a>(<a title="String" id="9872">sql</a>:<span title="String">String</span>, <a title="DBAdapter.this.Param*" id="9873">params</a>:<span title="DBAdapter.this.Param*">Param</span>*):<span title="Int">Int</span> = {
	  <a href="#9543" title="(String,DBAdapter.this.Param*)java.sql.PreparedStatement">prepareStatement</a>(<a href="#9872" title="String">sql</a>, <a href="#9873" title="DBAdapter.this.Param*">params</a>:_*).<a title="()Int" id="9555">executeUpdate</a>; 
	}   
    <span class="keyword">def</span> <a title="(String,DBAdapter.this.Param*)((java.sql.ResultSet) =&gt; Seq[scala.xml.Node])Seq[scala.xml.Node]" id="9545">select</a>(<a title="String" id="9887">query</a>:<span title="String">String</span>, <a title="DBAdapter.this.Param*" id="9888">params</a>:<span title="DBAdapter.this.Param*">Param</span>*)(<a title="(java.sql.ResultSet) =&gt; Seq[scala.xml.Node]" id="9889">r</a>:ResultSet =&gt; Seq[Node]):<span title="Seq[scala.xml.Node]">Seq</span>[Node] = {
      <span class="keyword">val</span> <a title="java.sql.ResultSet" id="10089">result</a> = <a href="#9543" title="(String,DBAdapter.this.Param*)java.sql.PreparedStatement">prepareStatement</a>(<a href="#9887" title="String">query</a>, <a href="#9888" title="DBAdapter.this.Param*">params</a>:_*).<a title="()java.sql.ResultSet" id="9554">executeQuery</a>;      
      <span class="comment">//nested function</span>
      <span class="keyword">def</span> <a title="(Seq[scala.xml.Node],java.sql.ResultSet)Seq[scala.xml.Node]" id="10090">doRow</a>(<a title="Seq[scala.xml.Node]" id="10093">acc</a>:<span title="Seq[scala.xml.Node]">Seq</span>[Node], <a title="java.sql.ResultSet" id="10094">row</a>:<span title="java.sql.ResultSet">ResultSet</span>):<span title="Seq[scala.xml.Node]">Seq</span>[Node] = <span title="Seq[scala.xml.Node]" class="keyword">if</span> (<a title="=&gt; Boolean" id="2675">!</a><a href="#10094" title="java.sql.ResultSet">row</a>.<a title="()Boolean" id="9900">next</a>) <a href="#10093" title="Seq[scala.xml.Node]">acc</a> <span class="keyword">else</span> <a href="#10090" title="(Seq[scala.xml.Node],java.sql.ResultSet)Seq[scala.xml.Node]">doRow</a>(<a href="#10093" title="Seq[scala.xml.Node]">acc</a> <a title="(Iterable[scala.xml.Node])Seq[scala.xml.Node]" id="7971">++</a> <a href="#9889" title="(java.sql.ResultSet)Seq[scala.xml.Node]">r</a>(<a href="#10094" title="java.sql.ResultSet">row</a>), <a href="#10094" title="java.sql.ResultSet">row</a>)  
      <span class="keyword">try</span> {
    	  <a href="#10090" title="(Seq[scala.xml.Node],java.sql.ResultSet)Seq[scala.xml.Node]">doRow</a>(<span title="(Nothing*)Seq[Nothing]">Seq</span>(), <a href="#10089" title="java.sql.ResultSet">result</a>);
      } <span class="keyword">finally</span> { <a href="#10089" title="java.sql.ResultSet">result</a>.<a title="()Unit" id="9901">close</a>}      
    }
  }  
}
<span class="comment">//Interact natively with java libraries. Here scala is being invoked by java as a servlet and scala is invoking java jdbc libraries</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class WebserviceServlet extends javax.servlet.http.HttpServlet with ScalaObject" id="6723">WebserviceServlet</a> <span class="keyword">extends</span> <a title="javax.servlet.http.HttpServlet" id="7257">HttpServlet</a> {
  <span class="comment">//XML literal syntax checked by compiler. If xml is not wellformed the class will not compile. code can be embedded using {}</span>
	<span class="keyword">def</span> <a title="(scala.xml.Node)scala.xml.Elem" id="10136">soapEnvelope</a>(<a title="scala.xml.Node" id="10163">body</a>:<span title="scala.xml.Node">Node</span>) = (&lt;soapenv:Envelope xmlns:soapenv=<span title="java.lang.String(&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;)" class="string">&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;</span>&gt;
		&lt;soapenv:Header/&gt;
    	&lt;soapenv:Body&gt;{<a href="#10163" title="scala.xml.Node">body</a>}&lt;/soapenv:Body&gt;
    &lt;/soapenv:Envelope&gt;)

   <span class="keyword">override</span> <span class="keyword">def</span> <a title="(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)Unit" id="10137">doPost</a>(<a title="javax.servlet.http.HttpServletRequest" id="11021">req</a>:<a title="javax.servlet.http.HttpServletRequest" id="7269">HttpServletRequest</a>, <a title="javax.servlet.http.HttpServletResponse" id="11022">resp</a>:<a title="javax.servlet.http.HttpServletResponse" id="7236">HttpServletResponse</a>) = {  
    <span class="comment">//Type inference - No need to declare types. Most of the time the compiler can infer what that type a value is by how it is used.</span>
    <span class="keyword">val</span> <a title="scala.xml.Node" id="11111">response</a> = <span class="keyword">try</span> {
    	<span class="keyword">val</span> <a title="scala.xml.Elem" id="11112">in</a> = <span title="object scala.xml.XML">XML</span>.<a title="(java.io.InputStream)scala.xml.Elem" id="11131">load</a>( <a href="#11021" title="javax.servlet.http.HttpServletRequest">req</a>.<a title="()javax.servlet.ServletInputStream" id="11244">getInputStream</a>) 
    	<span class="comment">//Xpath like queries on XML. </span>
    	(<a href="#11112" title="scala.xml.Elem">in</a>  <span title="(String)scala.xml.NodeSeq">\</span> <span title="java.lang.String(&quot;Body&quot;)" class="string">&quot;Body&quot;</span> <span title="(String)scala.xml.NodeSeq">\</span> <span title="java.lang.String(&quot;_&quot;)" class="string">&quot;_&quot;</span>).<a title="=&gt; Option[scala.xml.Node]" id="7969">firstOption</a> <span title="scala.xml.Node" class="keyword">match</span> {
    		<span title="scala.xml.Node" class="keyword">case</span> <a id="1">Some</a>(<a title="scala.xml.Node" id="11295">payload</a>) =&gt; <a href="#10138" title="(scala.xml.Node)scala.xml.Node">handlePayload</a>(<a href="#11295" title="scala.xml.Node">payload</a>)
    		<span title="Nothing" class="keyword">case</span> <a title="object None" id="523">None</a> =&gt; <span title="Nothing" class="keyword">throw</span> <a title="(String)Nothing" id="6467">error</a>(<span title="java.lang.String(&quot;Payload element not found&quot;)" class="string">&quot;Payload element not found&quot;</span>)
    	}
    } <span class="keyword">catch</span> {
    	<span title="scala.xml.Elem" class="keyword">case</span> _@<a title="java.lang.Throwable" id="11306">e</a> =&gt; <a href="#11306" title="java.lang.Throwable">e</a>.<a title="()Unit" id="8299">printStackTrace</a>
    	  (&lt;soapenv:Fault&gt;
         	&lt;faultcode&gt;<span title="scala.xml.Text">soapenv</span>:Server&lt;/faultcode&gt;
         	&lt;faultstring&gt;{<a href="#11306" title="java.lang.Throwable">e</a>}&lt;/faultstring&gt;
         	&lt;faultactor&gt;<span title="scala.xml.Text">soapenv</span>:Server&lt;/faultactor&gt;
         &lt;/soapenv:Fault&gt;)      
    }    
    <span title="object scala.xml.XML">XML</span>.<a title="(java.io.Writer,scala.xml.Node,String,Boolean,scala.xml.dtd.DocType)Unit" id="11140">write</a>(<a href="#11022" title="javax.servlet.http.HttpServletResponse">resp</a>.<a title="()java.io.PrintWriter" id="11652">getWriter</a>,<a href="#10136" title="(scala.xml.Node)scala.xml.Elem">soapEnvelope</a>(<a href="#11111" title="scala.xml.Node">response</a>),<span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span>, <span title="Boolean(true)" class="keyword">true</span>,  <span title="Null(null)" class="keyword">null</span>)    
   }
  <span class="keyword">def</span> <a title="(scala.xml.Node)scala.xml.Node" id="10138">handlePayload</a>(<a title="scala.xml.Node" id="11296">payload</a>:<span title="scala.xml.Node">Node</span>):<span title="scala.xml.Node">Node</span>  
}

<span class="keyword">class</span> <a title="class UserDetailsWSServlet extends org.jgh.scalaws.WebserviceServlet with org.jgh.scalaws.DBAdapter with ScalaObject" id="6714">UserDetailsWSServlet</a> <span class="keyword">extends</span> <a href="#6723" title="org.jgh.scalaws.WebserviceServlet">WebserviceServlet</a> <span class="keyword">with</span> <a href="#6750" title="org.jgh.scalaws.DBAdapter">DBAdapter</a> {
  <span class="comment">//lazy value - evaluated once when it is first used</span>
  <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="javax.sql.DataSource" id="11683">datasource</a> = (<a title="()javax.naming.InitialContext" id="11691" class="keyword">new</a> <a title="javax.naming.InitialContext" id="7586">InitialContext</a>).<a title="(java.lang.String)java.lang.Object" id="11802">lookup</a>(<span title="java.lang.String(&quot;java:/comp/env/jdbc/test&quot;)" class="string">&quot;java:/comp/env/jdbc/test&quot;</span>).<a title="javax.sql.DataSource" id="3431">asInstanceOf</a>[<span title="javax.sql.DataSource">DataSource</span>]
  <span class="comment">//Partially applied functions (currying) using multiple parameter set stntax. Calling mapUser(c) will return a function that takes a ResultSet and returns Seq[Node]   </span>
  <span class="keyword">def</span> <a title="(UserDetailsWSServlet.this.Conn)(java.sql.ResultSet)Seq[scala.xml.Node]" id="11684">mapUser</a>(<a title="UserDetailsWSServlet.this.Conn" id="11913">c</a>:<a href="#7632" title="UserDetailsWSServlet.this.Conn">Conn</a>)(<a title="java.sql.ResultSet" id="11914">r</a>:<span title="java.sql.ResultSet">ResultSet</span>):<span title="Seq[scala.xml.Node]">Seq</span>[Node] = 
    (&lt;User id={<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#11914" title="java.sql.ResultSet">r</a>.<span title="(java.lang.String)Long">getLong</span>(<span title="java.lang.String(&quot;id&quot;)" class="string">&quot;id&quot;</span>)} firstName={<a href="#11914" title="java.sql.ResultSet">r</a>.<span title="(java.lang.String)java.lang.String">getString</span>(<span title="java.lang.String(&quot;firstName&quot;)" class="string">&quot;firstName&quot;</span>)} lastName={<a href="#11914" title="java.sql.ResultSet">r</a>.<span title="(java.lang.String)java.lang.String">getString</span>(<span title="java.lang.String(&quot;lastName&quot;)" class="string">&quot;lastName&quot;</span>)} &gt;
     &lt;Roles&gt;
      {<a href="#11913" title="UserDetailsWSServlet.this.Conn">c</a>.<a href="#9545" title="(String,UserDetailsWSServlet.this.Param*)((java.sql.ResultSet) =&gt; Seq[scala.xml.Node])Seq[scala.xml.Node]">select</a>(<span title="java.lang.String(&quot;select * from role_t where owner = ?&quot;)" class="string">&quot;select * from role_t where owner = ?&quot;</span>, <a href="#9428" title="(BigInt)UserDetailsWSServlet.this.LongParam">LongParam</a>(<a href="#11914" title="java.sql.ResultSet">r</a>.<a title="implicit scala.BigInt.long2bigInt : (Long)BigInt" id="9413">getLong</a>(<span title="java.lang.String(&quot;id&quot;)" class="string">&quot;id&quot;</span>))) ((<a title="java.sql.ResultSet" id="11953">r2</a>) =&gt; { 
    	 (&lt;Role name={<a href="#11953" title="java.sql.ResultSet">r2</a>.<span title="(java.lang.String)java.lang.String">getString</span>(<span title="java.lang.String(&quot;name&quot;)" class="string">&quot;name&quot;</span>)}&gt;&lt;<a title="scala.xml.Elem" id="10871">Description</a>&gt;{<a href="#11953" title="java.sql.ResultSet">r2</a>.<span title="(java.lang.String)java.lang.String">getString</span>(<span title="java.lang.String(&quot;description&quot;)" class="string">&quot;description&quot;</span>)}&lt;/Description&gt;&lt;/Role&gt;)
       	})
      }                                                                      	     	 
      &lt;/Roles&gt;
     &lt;/User&gt;)  
  
  <span class="comment">//pattern matching to extract data from objects </span>
  <span class="keyword">def</span> <a title="(scala.xml.Node)scala.xml.Node" id="11685">handlePayload</a>(<a title="scala.xml.Node" id="11960">payload</a>:<span title="scala.xml.Node">Node</span>):<span title="scala.xml.Node">Node</span> = <a href="#11960" title="scala.xml.Node">payload</a> <span title="scala.xml.Node" class="keyword">match</span> {
    <span title="scala.xml.Elem" class="keyword">case</span> (&lt;FindUsersRequest&gt;{<a title="scala.xml.Node" id="11962">x</a>}&lt;/FindUsersRequest&gt;) =&gt; {
      <span class="keyword">val</span> <a title="UserDetailsWSServlet.this.StringParam" id="11963">search</a> = <a href="#8360" title="(Any)UserDetailsWSServlet.this.StringParam">StringParam</a>(<span title="java.lang.String(&quot;%&quot;)" class="string">&quot;%&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#11962" title="scala.xml.Node">x</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;%&quot;)" class="string">&quot;%&quot;</span>)
      (&lt;Users xmlns=<span title="java.lang.String(&quot;urn:www.scalaws.org:UserDetails:v1&quot;)" class="string">&quot;urn:www.scalaws.org:UserDetails:v1&quot;</span>&gt;
      	{<a href="#7631" title="((UserDetailsWSServlet.this.Conn) =&gt; Seq[scala.xml.Node])Seq[scala.xml.Node]">withConn</a>(<a title="UserDetailsWSServlet.this.Conn" id="11968">c</a> =&gt;{
      	  <a href="#11968" title="UserDetailsWSServlet.this.Conn">c</a>.<a href="#9545" title="(String,UserDetailsWSServlet.this.Param*)((java.sql.ResultSet) =&gt; Seq[scala.xml.Node])Seq[scala.xml.Node]">select</a>(<span title="java.lang.String(&quot;select * from user_t where firstName like ? or lastName like ?&quot;)" class="string">&quot;select * from user_t where firstName like ? or lastName like ?&quot;</span>, <a href="#11963" title="UserDetailsWSServlet.this.StringParam">search</a>,<a href="#11963" title="UserDetailsWSServlet.this.StringParam">search</a>)(<a href="#11684" title="(UserDetailsWSServlet.this.Conn)(java.sql.ResultSet)Seq[scala.xml.Node]">mapUser</a>(<a href="#11968" title="UserDetailsWSServlet.this.Conn">c</a>))          	    
      	  })             
      	}      	
      &lt;/Users&gt;)    
    }
    <span title="scala.xml.Elem" class="keyword">case</span> (&lt;AllUsersRequest/&gt;) =&gt; {    	
    	(&lt;Users xmlns=<span title="java.lang.String(&quot;urn:www.scalaws.org:UserDetails:v1&quot;)" class="string">&quot;urn:www.scalaws.org:UserDetails:v1&quot;</span>&gt;
    	{<a href="#7631" title="((UserDetailsWSServlet.this.Conn) =&gt; Seq[scala.xml.Node])Seq[scala.xml.Node]">withConn</a>(<a title="UserDetailsWSServlet.this.Conn" id="11976">c</a> =&gt; <a href="#11976" title="UserDetailsWSServlet.this.Conn">c</a>.<a href="#9545" title="(String,UserDetailsWSServlet.this.Param*)((java.sql.ResultSet) =&gt; Seq[scala.xml.Node])Seq[scala.xml.Node]">select</a>(<span title="java.lang.String(&quot;select * from user_t&quot;)" class="string">&quot;select * from user_t&quot;</span>)(<a href="#11684" title="(UserDetailsWSServlet.this.Conn)(java.sql.ResultSet)Seq[scala.xml.Node]">mapUser</a>(<a href="#11976" title="UserDetailsWSServlet.this.Conn">c</a>))          	    
    	)}      	
    	&lt;/Users&gt;)    
    }
    <span title="scala.xml.Node" class="keyword">case</span> (&lt;User&gt;{<a title="Seq[scala.xml.Node]" id="11980">roles</a>@_*}&lt;/User&gt;) =&gt; <a href="#7631" title="(Int)scala.xml.Node">withConn</a>(<a title="UserDetailsWSServlet.this.Conn" id="11982">c</a> =&gt;  { <span class="comment">//Anonymous function</span>
      	  <span class="keyword">val</span> <a title="Seq[UserDetailsWSServlet.this.Param]" id="11983">params</a> = <span title="(UserDetailsWSServlet.this.Param*)Seq[UserDetailsWSServlet.this.Param]">Seq</span>( <a href="#9428" title="(BigInt)UserDetailsWSServlet.this.LongParam">LongParam</a>( <a title="(String)BigInt" id="9409">BigInt</a> (<a href="#11960" title="scala.xml.Node">payload</a> <span title="(String)scala.xml.NodeSeq">\</span> <span title="java.lang.String(&quot;@id&quot;)" class="string">&quot;@id&quot;</span> <a title="=&gt; String" id="10112">text</a>)),
                            <a href="#8360" title="(Any)UserDetailsWSServlet.this.StringParam">StringParam</a>( <a href="#11960" title="scala.xml.Node">payload</a> <span title="(String)scala.xml.NodeSeq">\</span> <span title="java.lang.String(&quot;@firstName&quot;)" class="string">&quot;@firstName&quot;</span>),
                       		<a href="#8360" title="(Any)UserDetailsWSServlet.this.StringParam">StringParam</a>(<a href="#11960" title="scala.xml.Node">payload</a> <span title="(String)scala.xml.NodeSeq">\</span> <span title="java.lang.String(&quot;@lastName&quot;)" class="string">&quot;@lastName&quot;</span>)                            )
      	  <a href="#11982" title="UserDetailsWSServlet.this.Conn">c</a>.<a href="#9544" title="(String,UserDetailsWSServlet.this.Param*)Int">insert</a>(<span title="java.lang.String(&quot;insert into user_t (id, firstName, lastName) values ( ?, ?, ?)&quot;)" class="string">&quot;insert into user_t (id, firstName, lastName) values ( ?, ?, ?)&quot;</span>, <a href="#11983" title="Seq[UserDetailsWSServlet.this.Param]">params</a>:_*) <span class="comment">//_* tells compiler that params is already a Seq (vararg)</span>
          (&lt;Done/&gt;)     <span class="comment">//inserting roles left as exercise for reader 	      </span>
    	})(<span title="Int(0)" class="int">0</span>) <span class="comment">//Get first node    </span>
    }    
}
        </pre>
    </body>
</html>